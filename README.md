# Проектная работа 9 спринта

## Первый запуск:

1. Создать файл .env:

```bash
cp .env.example .env
```

Изменить значения переменных, если это необходимо 2. Запустить базу данных:

```bash
make run-mongo
```

Подождать несколько секунд, пока база данных запустится. 3. Запустить инициализацию шардов и настройки репликации:

```bash
make init-db
```

4. Запустить создание пользователя БД:

```bash
make create-dbuser
```

5. Запустить API-сервис:

```bash
make run-api
```

## Обычный запуск

После первого запуска можно запускать все контейнеры командой:

```bash
make run-all
```

## Выполнение запросов

Документация swagger находится по адресу http://127.0.0.1/api-ugc/openapi

Для выполнения некоторых запросов необходимо быть авторизованным пользователем.
Для генерации access-токена можно использовать python-скрипт:

```bash
python tools/generate_token.py
```

## Подключение Sentry

Укажите в .env SENTRY_DSN актуальный [DSN](https://docs.sentry.io/concepts/key-terms/dsn-explainer/)

Для локального размещения

```bash
# Поднимаем Sentry
docker compose -f docker-compose-sentry.yml up -d
# Применяем миграции
docker compose exec sentry-api sentry upgrade
# В ходе миграций создаем пользователя
```

После применения миграций переходим по адресу
http://localhost:9000/
создаем проект и забираем DSN

Перезапускаем проект
